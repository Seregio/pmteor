<head>
  <title>Production process manager for Meteor applications</title>
</head>

<template name="layout">
  {{ > yield }}
</template>

<template name="index">
  <a href="{{ pathFor route='Applications' }}">Applications</a>
</template>

<template name="applications">
  <a href="{{ pathFor route='Insert' }}">New Application</a>
  <ul>
    {{# each applications }}
      <li>
        <a href="{{ pathFor route='Application' }}">{{ name }}</a> - <span class="status {{ status }}">{{ status }}</span> - {{ port }} {{ livestamp createdAt }}
        {{# unless isEqual status 'PROGRESS' }}
          {{# unless isEqual status 'ONLINE' }}
            <button class="start">Start</button>
            <button class="delete">Delete</button>
          {{/unless}}
          {{# if isEqual status 'ONLINE' }}
            <button class="stop">Stop</button>
          {{/if}}
        {{/unless}}
      </li>
    {{/each}}
  </ul>
</template>

<template name="application">
  {{ name }} - <span class="status {{ status }}">{{ status }}</span>
  <ul>
    {{# each logs }}
      <li>
        <b>{{ type }} - {{ livestamp createdAt }}</b>
        <div>{{{ data }}}</div>
      </li>
    {{/each}}
  </ul>
</template>

<template name="insert">
  {{ > quickForm collection="Applications" id="ApplicationsInsertForm" type="insert" }}
</template>

<template name="loading">
  Loading...
</template>
